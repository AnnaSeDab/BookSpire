{% extends "base.html" %}
{% block content %}

<!--page description-->
<div class="text-block  container margins">
    <span> Page and purpose descriprion "Lorem ipsum dolor sit amet, consectetur adipiscing elit, 
    sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, 
    quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. 
    Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat 
    nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui 
    officia deserunt mollit anim id est laborum."
    </span>
</div>

<!--sorting and -->
<div class="row margins">
    <div class="container">   
        <a href="{{ url_for('sorted') }}" class="waves-effect white-text brown darken-2 btn col s12 m5 l5">Sort by score</a>
        <div class="col s12 m2 l2"></div>
        {% if session.user %}
        <a href="{{ url_for('add_book') }}" class="waves-effect white-text brown darken-2 btn col s12 m5 l5">Add a book</a>
        {% endif %}
    </div>
</div>


<!-- books -->
<div class="row">
    {% for book in books %}
    <div class="card col s12 m6 l3 padded-grid">
        <div class="card-image waves-effect waves-block waves-light">
            <img class="activator cover" src="{{ book.cover }}">
        </div>
        <!-- delete and edit button -->
        {% if session.user|lower == book.username|lower %}
        <div class="centered-icons">
            <a href="{{ url_for('edit_book', book_id=book.id) }}"><i class="fa-solid fa-pen-to-square brown-text text-darken-4"></i></a>
            <a href="{{ url_for('delete_book', book_id=book.id) }}"><i class="fa-solid fa-trash brown-text text-darken-4"></i></a>
        </div>
        {% else %}
        <!-- line to even out card height when buttons not showing -->
        <div class="centered-icons">
            <br>
        </div>
        {% endif %}
        <div class="centered-elemet card-content-padding">
            <h5 class="brown-text text-darken-4"><a href="{{ url_for('book', book_id=book.id) }}">{{ book.title }}</a></h5>
            <span class="card-title brown-text text-darken-4">{{ book.author }}</span>
            
        </div>
        <div>
            <p class="centered-elemet">Genre: {{ book.genre }}</p>
            <p class="centered-elemet">Pozitive rieviews: {{ book.score }}</p>
        </div>
    </div>
    {% endfor %}
</div>
            
{% endblock %}